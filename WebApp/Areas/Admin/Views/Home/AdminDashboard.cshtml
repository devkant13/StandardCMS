@model IEnumerable<StandardCMS.DB.Models.Sale>

<h2>Sales and Commissions</h2>
<table>
    <thead>
        <tr>
            <th>Sale ID</th>
            <th>Agent</th>
            <th>Sale Amount</th>
            <th>Commissions</th>
        </tr>
    </thead>
    <tbody>
        @if (Model != null)
        {
            @foreach (var sale in Model)
            {
                <tr>
                    <td>@sale.SaleId</td>
                    <td>
                        @if (sale.Agent != null)
                        {
                            @sale.Agent.Name
                        }
                    </td>
                    <td>@sale.SaleAmount</td>
                    <td>
                        @if (sale.Commissions != null && sale.Commissions.Any())
                        {
                            @foreach (var commission in sale.Commissions)
                            {
                                <p>@commission.Agent.Name: @commission.CommissionAmount</p>
                            }
                        }
                    </td>
                </tr>
            }
        }
    </tbody>
</table>
